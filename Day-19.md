# üìò Day-16: IBM MQ ‚Äî Logs Overview: Queue Manager, Channel & Listener Logs

This lesson covers the various types of logs generated by IBM MQ, their purposes, locations, and how to troubleshoot using these logs.

---

## üîπ Objectives

- Understand different IBM MQ log types
- Locate and interpret Queue Manager logs
- Review Channel and Listener trace logs
- Use logs effectively for troubleshooting

---

## üß† Types of IBM MQ Logs

| Log Type          | Purpose                                              | Default Location (Linux)             |
|-------------------|-----------------------------------------------------|------------------------------------|
| **Queue Manager Logs** | Records QMGR lifecycle events, errors, warnings       | `/var/mqm/qmgrs/<QMGR>/errors/`    |
| **Error Logs**     | Includes AMQERR01.LOG, AMQERR02.LOG (detailed errors) | `/var/mqm/errors/` (Global)          |
| **Channel Logs**   | Logs for channel events & errors (if tracing enabled) | `/var/mqm/qmgrs/<QMGR>/errors/` or configured trace directory |
| **Listener Logs**  | Logs listener start/stop and errors (if enabled)       | Not enabled by default; trace files |

---

## üõ†Ô∏è Queue Manager Logs

### ‚úÖ Default Logs

- **AMQERR01.LOG**: General errors, warnings, info  
- **AMQERR02.LOG, AMQERR03.LOG...**: Older rotated logs

Located in:

```bash
/var/mqm/qmgrs/<QMGR>/errors/
```
- Global MQ error logs:

```bash
/var/mqm/errors/
```
#### Viewing Queue Manager Logs
``` bash
tail -f /var/mqm/qmgrs/<QMGR>/errors/AMQERR01.LOG
```
Monitor live messages/errors as they happen.

Search logs using grep to filter keywords or timestamps.

### 3Ô∏è‚É£ Channel Logs & Trace
Enabling Channel Trace
Use runmqsc command to enable channel tracing dynamically:

```bash
runmqsc QMGR
START TRACE(CHANNEL) TRACEID(<channel_name>) TRACELEVEL(4)
END
```
TRACELEVEL ranges from 1 (minimal) to 5 (maximum detail).

Channel trace logs are written in binary format to MQ trace directory.

Location of Channel Trace Files
Default trace directory:

```bash
/var/mqm/trace/
```
Trace filenames typically contain the QMGR name and timestamp.

Decoding Trace Files
Use IBM MQ tool dspmqtrc or MQ Explorer to analyze trace files.

Trace files can be very large; enable only when troubleshooting.

### 4Ô∏è‚É£ Listener Logs
- Listener logs are not generated by default.

- Listener start/stop and error events appear in QMGR error logs (AMQERR01.LOG).

- To get detailed listener activity:

  - Enable tracing on the listener channel (same as channel trace).

  - Use external system/network monitoring for TCP port status.

### 5Ô∏è‚É£ Useful MQ Log Commands Summary
|Command	|Purpose|
|---------|-------|
|tail -f /var/mqm/qmgrs/<QMGR>/errors/AMQERR01.LOG	|Real-time monitoring of QMGR errors|
|runmqsc QMGR + START TRACE(CHANNEL)	E|nable channel trace for deep diagnostics|
|endtrace	|Stop MQ tracing|
|strmqm QMGR	S|tart Queue Manager|
|endmqm QMGR	|Stop Queue Manager|
|grep <keyword> AMQERR01.LOG	|Search logs for specific error or event|

### 6Ô∏è‚É£ Common Troubleshooting Scenarios Using Logs
|Scenario	|Log to Check	|Notes|
|---------|-------------|-----|
|QMGR fails to start	|AMQERR01.LOG (QMGR errors)	|Look for startup failure reasons|
|Channels stuck in retry or inactive	|Channel trace logs + AMQERR01.LOG	|Check connection and auth errors|
|Listener not accepting connections	|Listener errors in AMQERR01.LOG	|Firewall, port conflicts, or misconfig|
|Security/authorization failures	Q|MGR error logs + CHLAUTH trace if enabled	|Check 2035 or 2085 MQRC errors|

### 7Ô∏è‚É£ Best Practices for MQ Logs
- Regularly rotate and archive logs to prevent disk full issues.

- Enable channel tracing only temporarily to reduce overhead.

- Monitor logs proactively using automated scripts.

- Correlate MQRC codes from logs with IBM documentation for faster resolution.

### 8Ô∏è‚É£ References & Further Reading
[IBM MQ Error Logs Overview)[https://www.ibm.com/docs/en/ibm-mq/9.3?topic=errors-error-logs)

[IBM MQ Channel Tracing](https://www.ibm.com/docs/en/ibm-mq/9.3?topic=channels-channel-tracing)

[IBM MQ Listener Configuration](https://www.ibm.com/docs/en/ibm-mq/9.3?topic=listeners-overview)

[IBM MQ Troubleshooting Guide](https://www.ibm.com/support/pages/ibm-mq-troubleshooting)

## ‚úÖ Summary Table
|Log Type	|Location	|Purpose	|Notes|
|--------|----------|---------|-----|
|QMGR Error Logs	|/var/mqm/qmgrs/<QMGR>/errors/	Q|MGR lifecycle and error info	|Use tail -f to monitor live|
|Global MQ Errors	|/var/mqm/errors/	|System-wide MQ errors	|Includes installation-wide issues|
|Channel Trace Logs	|var/mqm/trace/	|Deep diagnostics for channels	|Binary files, decode required|
|Listener Logs	|In QMGR error logs	|Listener start/stop, errors	|No separate log file by default|

